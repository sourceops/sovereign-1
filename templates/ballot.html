<template name="ballot">

  <div class="section">

    <div class="w-clearfix paper-header">
      <img src="{{pathFor route='home'}}images/ballotbox.png" class="section-icon">
      <div>{{_ "draft-ballot"}}</div>
    </div>

    <div class="description">
      <ul class="w-list-unstyled settings">
        <li class="w-clearfix setting">
          <div class="text setting-label">{{_ "closing-date-of-poll"}}</div>
          <div class="value">
            {{> calendar}}
          </div>
        </li>
        <li class="w-clearfix setting">
          <div class="text setting-label">{{_ "allow-voters-suggest"}}</div>
          <div class="w-clearfix value">
            <div id="toggle-allowForks" class="toggle {{allowForks}}">
              <div class="toggle-button {{allowForks}}"></div>
            </div>
          </div>
        </li>
        <li class="w-clearfix setting">
          <div class="text setting-label">{{_ "enable-multiple-choice"}}</div>
          <div class="w-clearfix value">
            <div id="toggle-multipleChoice" class="w-clearfix toggle {{multipleChoice}}">
              <div class="toggle-button {{multipleChoice}}"></div>
            </div>
          </div>
        </li>
        <li class="w-clearfix setting">
          <div class="text setting-label">{{_ "executive-decision"}}</div>
          <div class="w-clearfix value">
            <div id="toggle-executiveDecision" class="w-clearfix toggle {{executiveDecision}}">
              <div class="toggle-button {{executiveDecision}}"></div>
            </div>
          </div>
        </li>
      </ul>
    </div>


    <div class="extra">
      <ul class="w-list-unstyled" style="margin-top:10px">
      {{#if backdating}}
        <li class="warning">{{_ "backdating"}}</li>
      {{/if}}
      </ul>
    </div>

    {{#if executiveDecision}}
      <div class="section">
        <h5>{{_ "executive-options"}}</h5>
        <div class="w-clearfix elements">
          <ul class="w-list-unstyled w-clearfix options">
            {{> fork executive=true mode="AUTHORIZE"}}
            {{> fork executive=true mode="REJECT"}}
          </ul>
        </div>
      </div>
    {{/if}}

    <div class="section">

      {{#if ballotReady}}
        {{#if executiveDecision}}
          <h5>{{_ "alternative-options"}}</h5>
        {{else}}
          <h5>{{_ "only-ballot-options"}}</h5>
        {{/if}}
      {{/if}}

      <div class="w-clearfix elements">
        <ul id="ballotOption" class="w-list-unstyled w-clearfix options connectedBallot">
          {{#each options}}
            {{> fork _id=_id label=label alternative=true}}
          {{/each}}
        </ul>
      </div>

      <div class="extra">
        <ul class="w-list-unstyled">
        {{#if disabledCheckboxes}}
          <li class="warning">{{_ "disabled-checkboxes"}}</li>
        {{/if}}
        {{#if duplicateFork}}
          <li class="warning">{{_ "duplicate-fork"}}</li>
        {{/if}}
        {{#if unauthorizedFork}}
          <li class="warning">{{_ "unauthorized-fork"}}</li>
        {{/if}}
        {{#if emptyBallot}}
          <li class="warning">{{_ "empty-ballot"}}</li>
        {{/if}}
        </ul>
      </div>

    </div>


    {{> search}}

  </div>
</template>

<template name="fork">
  {{#if executive}}
    <li id="ballotProposalOption" class="vote {{checkbox mode}}">
      <div class="w-clearfix checkbox">
        <div id="ballotCheckbox" class="option {{option mode}}">
          <div class="tick"><img src="{{pathFor route='home'}}images/white-tick-thin.png" class="tick-image hover">
          </div>
        </div>
        <div class="w-clearfix checkbox">
          <div class="option-title {{decision mode}}">
            {{_ mode}}
          </div>
        </div>
      </div>
    </li>
  {{else}}
    <li id="ballotProposalOption" class="vote {{checkbox ../mode}}" rank="{{../rank}}" value="{{_id}}">
      <div class="w-clearfix checkbox">
        <div id="ballotCheckbox" class="option {{option ../mode}}">
          <div class="tick"><img src="{{pathFor route='home'}}images/white-tick-thin.png" class="tick-image hover">
          </div>
        </div>
        <div class="w-clearfix checkbox">
          <a href="{{../url}}" class="option-title {{decision ../mode}}">
            {{caption ../mode ../label}}
          </a>
        </div>
      </div>
    </li>
  {{/if}}
</template>
